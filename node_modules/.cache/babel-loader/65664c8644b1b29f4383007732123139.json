{"ast":null,"code":"import _slicedToArray from\"/home/bazig/Downloads/netlifyP/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{Avatar,TextField,Button}from\"@material-ui/core\";import\"./SidebarChat.css\";import db from\"../../Config/firebase\";import{Link}from\"react-router-dom\";import Modal from\"@material-ui/core/Modal\";var SidebarChat=function SidebarChat(_ref){var _messages$;var addNewChat=_ref.addNewChat,id=_ref.id,name=_ref.name;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),seed=_useState2[0],setSeed=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),messages=_useState4[0],setMessages=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),open=_useState6[0],setOpen=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),input=_useState8[0],setInput=_useState8[1];useEffect(function(){//for getting the last message that was sent\nif(id){db.collection(\"rooms\").doc(id).collection(\"messages\").orderBy(\"timestamp\",\"desc\").onSnapshot(function(snapshot){return setMessages(snapshot.docs.map(function(doc){return doc.data();}));});}},[id]);useEffect(function(){setSeed(Math.floor(Math.random()*5000));},[]);var handleOpen=function handleOpen(){setOpen(true);};var handleClose=function handleClose(){setOpen(false);};var createChat=function createChat(e){e.preventDefault();if(input){//do some stuffs in db\ndb.collection(\"rooms\").add({name:input});setInput(\"\");handleClose();}};return!addNewChat?/*#__PURE__*/React.createElement(Link,{to:\"/rooms/\".concat(id)},/*#__PURE__*/React.createElement(\"div\",{className:\"sidebarChat\"},/*#__PURE__*/React.createElement(Avatar,{src:\"https://avatars.dicebear.com/api/human/\".concat(seed,\".svg\")}),/*#__PURE__*/React.createElement(\"div\",{className:\"sidebarChat__info\"},/*#__PURE__*/React.createElement(\"h2\",null,name),/*#__PURE__*/React.createElement(\"p\",null,(_messages$=messages[0])===null||_messages$===void 0?void 0:_messages$.message)))):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Modal,{open:open,onClose:handleClose,\"aria-labelledby\":\"simple-modal-title\",\"aria-describedby\":\"simple-modal-description\",className:\"sidebarChat__modal\"},/*#__PURE__*/React.createElement(\"div\",{className:\"sidebarChat__modalContainer\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Add a New Chat\"),/*#__PURE__*/React.createElement(TextField,{variant:\"outlined\",placeholder:\"Enter room name\",value:input,onChange:function onChange(e){return setInput(e.target.value);}}),/*#__PURE__*/React.createElement(Button,{onClick:createChat},\"Create\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"sidebarChat\",onClick:handleOpen},/*#__PURE__*/React.createElement(\"h2\",null,\"Add New Chat\")));};export default SidebarChat;","map":{"version":3,"sources":["/home/bazig/Downloads/netlifyP/src/Components/SidebarChat/SidebarChat.js"],"names":["React","useEffect","useState","Avatar","TextField","Button","db","Link","Modal","SidebarChat","addNewChat","id","name","seed","setSeed","messages","setMessages","open","setOpen","input","setInput","collection","doc","orderBy","onSnapshot","snapshot","docs","map","data","Math","floor","random","handleOpen","handleClose","createChat","e","preventDefault","add","message","target","value"],"mappings":"qJAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,MAAT,CAAiBC,SAAjB,CAA4BC,MAA5B,KAA0C,mBAA1C,CACA,MAAO,mBAAP,CACA,MAAOC,CAAAA,EAAP,KAAe,uBAAf,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,MAAOC,CAAAA,KAAP,KAAkB,yBAAlB,CACA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,MAA8B,mBAA3BC,CAAAA,UAA2B,MAA3BA,UAA2B,CAAfC,EAAe,MAAfA,EAAe,CAAXC,IAAW,MAAXA,IAAW,eACxBV,QAAQ,CAAC,EAAD,CADgB,wCACzCW,IADyC,eACnCC,OADmC,8BAEhBZ,QAAQ,CAAC,EAAD,CAFQ,yCAEzCa,QAFyC,eAE/BC,WAF+B,8BAGxBd,QAAQ,CAAC,KAAD,CAHgB,yCAGzCe,IAHyC,eAGnCC,OAHmC,8BAItBhB,QAAQ,CAAC,EAAD,CAJc,yCAIzCiB,KAJyC,eAIlCC,QAJkC,eAKhDnB,SAAS,CAAC,UAAM,CACd;AACA,GAAIU,EAAJ,CAAQ,CACNL,EAAE,CAACe,UAAH,CAAc,OAAd,EACGC,GADH,CACOX,EADP,EAEGU,UAFH,CAEc,UAFd,EAGGE,OAHH,CAGW,WAHX,CAGwB,MAHxB,EAIGC,UAJH,CAIc,SAAAC,QAAQ,QAClBT,CAAAA,WAAW,CAACS,QAAQ,CAACC,IAAT,CAAcC,GAAd,CAAkB,SAAAL,GAAG,QAAIA,CAAAA,GAAG,CAACM,IAAJ,EAAJ,EAArB,CAAD,CADO,EAJtB,EAOD,CACF,CAXQ,CAWN,CAACjB,EAAD,CAXM,CAAT,CAYAV,SAAS,CAAC,UAAM,CACda,OAAO,CAACe,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,GAAgB,IAA3B,CAAD,CAAP,CACD,CAFQ,CAEN,EAFM,CAAT,CAIA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAM,CACvBd,OAAO,CAAC,IAAD,CAAP,CACD,CAFD,CAGA,GAAMe,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,CACxBf,OAAO,CAAC,KAAD,CAAP,CACD,CAFD,CAGA,GAAMgB,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAAAC,CAAC,CAAI,CACtBA,CAAC,CAACC,cAAF,GACA,GAAIjB,KAAJ,CAAW,CACT;AACAb,EAAE,CAACe,UAAH,CAAc,OAAd,EAAuBgB,GAAvB,CAA2B,CACzBzB,IAAI,CAAEO,KADmB,CAA3B,EAGAC,QAAQ,CAAC,EAAD,CAAR,CACAa,WAAW,GACZ,CACF,CAVD,CAWA,MAAO,CAACvB,UAAD,cACL,oBAAC,IAAD,EAAM,EAAE,kBAAYC,EAAZ,CAAR,eACE,2BAAK,SAAS,CAAC,aAAf,eACE,oBAAC,MAAD,EAAQ,GAAG,kDAA4CE,IAA5C,QAAX,EADF,cAEE,2BAAK,SAAS,CAAC,mBAAf,eACE,8BAAKD,IAAL,CADF,cAEE,yCAAIG,QAAQ,CAAC,CAAD,CAAZ,qCAAI,WAAauB,OAAjB,CAFF,CAFF,CADF,CADK,cAWL,qDACE,oBAAC,KAAD,EACE,IAAI,CAAErB,IADR,CAEE,OAAO,CAAEgB,WAFX,CAGE,kBAAgB,oBAHlB,CAIE,mBAAiB,0BAJnB,CAKE,SAAS,CAAC,oBALZ,eAOE,2BAAK,SAAS,CAAC,6BAAf,eACE,+CADF,cAEE,oBAAC,SAAD,EACE,OAAO,CAAC,UADV,CAEE,WAAW,CAAC,iBAFd,CAGE,KAAK,CAAEd,KAHT,CAIE,QAAQ,CAAE,kBAAAgB,CAAC,QAAIf,CAAAA,QAAQ,CAACe,CAAC,CAACI,MAAF,CAASC,KAAV,CAAZ,EAJb,EAFF,cAQE,oBAAC,MAAD,EAAQ,OAAO,CAAEN,UAAjB,WARF,CAPF,CADF,cAmBE,2BAAK,SAAS,CAAC,aAAf,CAA6B,OAAO,CAAEF,UAAtC,eACE,6CADF,CAnBF,CAXF,CAmCD,CAzED,CA2EA,cAAevB,CAAAA,WAAf","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Avatar, TextField, Button } from \"@material-ui/core\";\nimport \"./SidebarChat.css\";\nimport db from \"../../Config/firebase\";\nimport { Link } from \"react-router-dom\";\nimport Modal from \"@material-ui/core/Modal\";\nconst SidebarChat = ({ addNewChat, id, name }) => {\n  const [seed, setSeed] = useState(\"\");\n  const [messages, setMessages] = useState(\"\");\n  const [open, setOpen] = useState(false);\n  const [input, setInput] = useState(\"\");\n  useEffect(() => {\n    //for getting the last message that was sent\n    if (id) {\n      db.collection(\"rooms\")\n        .doc(id)\n        .collection(\"messages\")\n        .orderBy(\"timestamp\", \"desc\")\n        .onSnapshot(snapshot =>\n          setMessages(snapshot.docs.map(doc => doc.data()))\n        );\n    }\n  }, [id]);\n  useEffect(() => {\n    setSeed(Math.floor(Math.random() * 5000));\n  }, []);\n\n  const handleOpen = () => {\n    setOpen(true);\n  };\n  const handleClose = () => {\n    setOpen(false);\n  };\n  const createChat = e => {\n    e.preventDefault();\n    if (input) {\n      //do some stuffs in db\n      db.collection(\"rooms\").add({\n        name: input\n      });\n      setInput(\"\");\n      handleClose();\n    }\n  };\n  return !addNewChat ? (\n    <Link to={`/rooms/${id}`}>\n      <div className=\"sidebarChat\">\n        <Avatar src={`https://avatars.dicebear.com/api/human/${seed}.svg`} />\n        <div className=\"sidebarChat__info\">\n          <h2>{name}</h2>\n          <p>{messages[0]?.message}</p>\n        </div>\n      </div>\n    </Link>\n  ) : (\n    <>\n      <Modal\n        open={open}\n        onClose={handleClose}\n        aria-labelledby=\"simple-modal-title\"\n        aria-describedby=\"simple-modal-description\"\n        className=\"sidebarChat__modal\"\n      >\n        <div className=\"sidebarChat__modalContainer\">\n          <h1>Add a New Chat</h1>\n          <TextField\n            variant=\"outlined\"\n            placeholder=\"Enter room name\"\n            value={input}\n            onChange={e => setInput(e.target.value)}\n          />\n          <Button onClick={createChat}>Create</Button>\n        </div>\n      </Modal>\n      <div className=\"sidebarChat\" onClick={handleOpen}>\n        <h2>Add New Chat</h2>\n      </div>\n    </>\n  );\n};\n\nexport default SidebarChat;\n"]},"metadata":{},"sourceType":"module"}